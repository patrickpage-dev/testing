{% extends "base.html" %}

{% block title %}Session Details - Golf Practice Tracker{% endblock %}

{% block content %}
    <h1 class="page-title">Session Details</h1>
    
    <div class="card">
        <div class="badge {{ session.session_type.replace(' ', '') }}">{{ session.session_type }}</div>
        <h3>{{ session.session_date.strftime('%b %d, %Y %H:%M') }}</h3>
        <div class="meta">How did it feel today? {{ session.subjective_feel }}/5</div>
        <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
            <a href="{{ url_for('add_drill', session_id=session.id) }}" class="btn btn-primary">+ Add Another Drill</a>
            <a href="{{ url_for('export_drills_csv', session_id=session.id) }}" class="btn">Export Drills to CSV</a>
            <a href="{{ url_for('edit_session', session_id=session.id) }}" class="btn">Edit Session</a>
            <form method="post" action="{{ url_for('delete_session', session_id=session.id) }}" class="inline-form" onsubmit="return confirm('Are you sure you want to delete this session? This will also delete all drills associated with it.');">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                <button type="submit" class="btn" style="background: var(--danger); color: white; border-color: var(--danger);">Delete Session</button>
            </form>
            <a href="{{ url_for('dashboard') }}" class="btn btn-ghost">Back to Dashboard</a>
        </div>
    </div>

    <h2 class="page-title" style="margin-top: 30px;">Drills for this Session</h2>
    <div class="grid">
        {% if drills %}
            {% for drill in drills %}
            <div class="card third">
                <h3>{{ drill.drill_name }}</h3>
                <div class="meta">Club: {{ drill.club if drill.club else 'N/A' }}</div>
                {% if drill.target_distance %}
                <div class="meta">Target Distance: {{ drill.target_distance }} yards</div>
                {% endif %}
                {% if drill.balls_hit %}
                <div class="meta">Balls Hit: {{ drill.balls_hit }}</div>
                {% endif %}
                {% if drill.success_metric %}
                <div class="meta">Success Metric: {{ drill.success_metric }}</div>
                {% endif %}
                <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <a href="{{ url_for('edit_drill', drill_id=drill.id) }}" class="btn" style="font-size: 12px; padding: 6px 10px;">Edit</a>
                    <form method="post" action="{{ url_for('delete_drill', drill_id=drill.id) }}" class="inline-form" onsubmit="return confirm('Are you sure you want to delete this drill?');">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                        <button type="submit" class="btn" style="font-size: 12px; padding: 6px 10px; background: var(--danger); color: white; border-color: var(--danger);">Delete</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        {% else %}
        <div class="card empty-state">
            <h3>No drills recorded for this session yet.</h3>
            <p class="meta">Add your first drill to start tracking your practice details.</p>
            <div style="margin-top: 20px;">
                <a href="{{ url_for('add_drill', session_id=session.id) }}" class="btn btn-primary">Add First Drill</a>
            </div>
        </div>
        {% endif %}
    </div>
{% endblock %}