{% extends "base.html" %}

{% block title %}Dashboard - Golf Practice Tracker{% endblock %}

{% block content %}
    {% if stats %}
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-label">Sessions This Week</div>
            <div class="stat-value">{{ stats.sessions_this_week }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Average Feel (This Month)</div>
            <div class="stat-value">{{ "%.1f"|format(stats.avg_feel_month) if stats.avg_feel_month else "N/A" }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Most Used Club</div>
            <div class="stat-value">{{ stats.most_used_club or "N/A" }}</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Last Session</div>
            <div class="stat-value">{{ stats.last_session_date.strftime('%b %d') if stats.last_session_date else "None" }}</div>
        </div>
    </div>
    {% endif %}

    <h2 class="page-title">Practice Sessions</h2>
    <p class="page-subtitle">Log, review, and refine your training.</p>

    <div class="page-actions-secondary">
        <a class="btn" href="{{ url_for('export_sessions_csv') }}">Export All Sessions</a>
    </div>

    <div class="grid">
        {% for session in sessions %}
        <div class="card half">
            <div class="badge {{ session.session_type.replace(' ', '') }}">{{ session.session_type }}</div>
            <h3>{{ session.session_date.strftime('%b %d, %Y %H:%M') }}</h3>
            <div class="meta">Feel: {{ session.subjective_feel }}/5</div>
            <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                <a href="{{ url_for('session_details', session_id=session.id) }}" class="btn btn-primary">View Session</a>
                <a href="{{ url_for('export_drills_csv', session_id=session.id) }}" class="btn">Export Drills</a>
                <a href="{{ url_for('edit_session', session_id=session.id) }}" class="btn btn-ghost" style="font-size: 12px; padding: 6px 10px;">Edit</a>
                <form method="post" action="{{ url_for('delete_session', session_id=session.id) }}" class="inline-form" onsubmit="return confirm('Are you sure you want to delete this session? This will also delete all drills associated with it.');">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-ghost" style="font-size: 12px; padding: 6px 10px; color: var(--danger);">Delete</button>
                </form>
            </div>
        </div>
        {% else %}
        <div class="card empty-state">
            <h3>No practice sessions yet</h3>
            <p class="meta">Start tracking your practice to see improvement over time.</p>
            <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                <a href="{{ url_for('add_session') }}" class="btn btn-primary">Add Your First Session</a>
                <a href="{{ url_for('add_journal_entry') }}" class="btn">Add a Journal Entry</a>
                <a href="{{ url_for('course_list') }}" class="btn">Manage Courses</a>
            </div>
        </div>
        {% endfor %}
    </div>
{% endblock %}